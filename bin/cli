#!/usr/bin/env node
var argv = require("optimist").
usage("Usage: $0 -t [type] -c [config] -s [maestro script]").
demand(["t"]).
default("c", "~/.maestro/config.json").
describe("s", "script to run with maestro").
describe("t", "type of server").
describe("c", "config path").
argv;

var outcome = require("outcome");

var maestro = require("../"),
config = require(argv.c.replace("~", process.env.HOME));


if(argv.t == "server") {
	var loader = maestro(config);

} else {
	var loader = maestro.client(config);
}


if(argv.s) loader.require(argv.s);

loader.load(outcome.success(function(){}));